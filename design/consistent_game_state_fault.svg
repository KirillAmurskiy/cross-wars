<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="701.75px" preserveAspectRatio="none" style="width:827px;height:701px;" version="1.1" viewBox="0 0 827 701" width="827.75px" zoomAndPan="magnify"><defs><filter height="300%" id="fay23ov0ohgb2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="7.0" dy="7.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="31.5" lengthAdjust="spacingAndGlyphs" textLength="497" x="166.25" y="50.1997">Inconsistent game state on frontend</text><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="47.5576" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="190.0527"/><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="33.25" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="322.5332"/><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="24.5" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="408.8984"/><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="103.8652" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="495.2637"/><line style="stroke: #A80036; stroke-width: 1.75; stroke-dasharray: 5.0,5.0;" x1="248.5" x2="248.5" y1="133.4375" y2="630.6289"/><line style="stroke: #A80036; stroke-width: 1.75; stroke-dasharray: 5.0,5.0;" x1="518" x2="518" y1="133.4375" y2="630.6289"/><line style="stroke: #A80036; stroke-width: 1.75; stroke-dasharray: 5.0,5.0;" x1="766.5" x2="766.5" y1="133.4375" y2="630.6289"/><rect fill="#FEFECE" filter="url(#fay23ov0ohgb2)" height="55.3164" style="stroke: #A80036; stroke-width: 2.625;" width="89.25" x="201.25" y="69.3711"/><text fill="#000000" font-family="sans-serif" font-size="24.5" lengthAdjust="spacingAndGlyphs" textLength="64.75" x="213.5" y="107.0542">User1</text><rect fill="#FEFECE" filter="url(#fay23ov0ohgb2)" height="55.3164" style="stroke: #A80036; stroke-width: 2.625;" width="89.25" x="201.25" y="628.8789"/><text fill="#000000" font-family="sans-serif" font-size="24.5" lengthAdjust="spacingAndGlyphs" textLength="64.75" x="213.5" y="666.562">User1</text><rect fill="#FEFECE" filter="url(#fay23ov0ohgb2)" height="55.3164" style="stroke: #A80036; stroke-width: 2.625;" width="120.75" x="455" y="69.3711"/><text fill="#000000" font-family="sans-serif" font-size="24.5" lengthAdjust="spacingAndGlyphs" textLength="96.25" x="467.25" y="107.0542">Backend</text><rect fill="#FEFECE" filter="url(#fay23ov0ohgb2)" height="55.3164" style="stroke: #A80036; stroke-width: 2.625;" width="120.75" x="455" y="628.8789"/><text fill="#000000" font-family="sans-serif" font-size="24.5" lengthAdjust="spacingAndGlyphs" textLength="96.25" x="467.25" y="666.562">Backend</text><rect fill="#FEFECE" filter="url(#fay23ov0ohgb2)" height="55.3164" style="stroke: #A80036; stroke-width: 2.625;" width="89.25" x="719.25" y="69.3711"/><text fill="#000000" font-family="sans-serif" font-size="24.5" lengthAdjust="spacingAndGlyphs" textLength="64.75" x="731.5" y="107.0542">User2</text><rect fill="#FEFECE" filter="url(#fay23ov0ohgb2)" height="55.3164" style="stroke: #A80036; stroke-width: 2.625;" width="89.25" x="719.25" y="628.8789"/><text fill="#000000" font-family="sans-serif" font-size="24.5" lengthAdjust="spacingAndGlyphs" textLength="64.75" x="731.5" y="666.562">User2</text><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="47.5576" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="190.0527"/><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="33.25" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="322.5332"/><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="24.5" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="408.8984"/><rect fill="#FFFFFF" filter="url(#fay23ov0ohgb2)" height="103.8652" style="stroke: #A80036; stroke-width: 1.75;" width="17.5" x="510.125" y="495.2637"/><polygon fill="#A80036" points="489.125,183.0527,506.625,190.0527,489.125,197.0527,496.125,190.0527" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="249.375" x2="499.625" y1="190.0527" y2="190.0527"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="106.75" x="261.625" y="181.554">getGame()</text><polygon fill="#A80036" points="268.625,230.6104,251.125,237.6104,268.625,244.6104,261.625,237.6104" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="258.125" x2="517.125" y1="237.6104" y2="237.6104"/><path d="M14,212.8027 L14,258.3027 L234.5,258.3027 L234.5,230.3027 L217,212.8027 L14,212.8027 " fill="#FBFB77" filter="url(#fay23ov0ohgb2)" style="stroke: #A80036; stroke-width: 1.75;"/><path d="M217,212.8027 L217,230.3027 L234.5,230.3027 L217,212.8027 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.75;"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="183.75" x="24.5" y="245.1692">game:foo=1,bar=1</text><polygon fill="#A80036" points="546.875,315.5332,529.375,322.5332,546.875,329.5332,539.875,322.5332" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="536.375" x2="765.625" y1="322.5332" y2="322.5332"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="206.5" x="557.375" y="314.0344">changeGame(bar=2)</text><path d="M273,283.418 L273,328.918 L493.5,328.918 L493.5,300.918 L476,283.418 L273,283.418 " fill="#FBFB77" filter="url(#fay23ov0ohgb2)" style="stroke: #A80036; stroke-width: 1.75;"/><path d="M476,283.418 L476,300.918 L493.5,300.918 L476,283.418 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.75;"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="183.75" x="283.5" y="315.7844">game:foo=1,bar=2</text><polygon fill="#A80036" points="746.375,348.7832,763.875,355.7832,746.375,362.7832,753.375,355.7832" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="518.875" x2="756.875" y1="355.7832" y2="355.7832"/><polygon fill="#A80036" points="489.125,401.8984,506.625,408.8984,489.125,415.8984,496.125,408.8984" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="249.375" x2="499.625" y1="408.8984" y2="408.8984"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="203" x="261.625" y="400.3997">subscribeOnGame()</text><polygon fill="#A80036" points="268.625,426.3984,251.125,433.3984,268.625,440.3984,261.625,433.3984" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="258.125" x2="517.125" y1="433.3984" y2="433.3984"/><polygon fill="#A80036" points="546.875,488.2637,529.375,495.2637,546.875,502.2637,539.875,495.2637" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="536.375" x2="765.625" y1="495.2637" y2="495.2637"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="204.75" x="557.375" y="486.7649">changeGame(foo=2)</text><path d="M273,456.1484 L273,501.6484 L493.5,501.6484 L493.5,473.6484 L476,456.1484 L273,456.1484 " fill="#FBFB77" filter="url(#fay23ov0ohgb2)" style="stroke: #A80036; stroke-width: 1.75;"/><path d="M476,456.1484 L476,473.6484 L493.5,473.6484 L476,456.1484 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.75;"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="183.75" x="283.5" y="488.5149">game:foo=2,bar=2</text><polygon fill="#A80036" points="268.625,558.8789,251.125,565.8789,268.625,572.8789,261.625,565.8789" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75; stroke-dasharray: 2.0,2.0;" x1="258.125" x2="508.375" y1="565.8789" y2="565.8789"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="218.75" x="279.125" y="557.3801">notifyGameChanged()</text><path d="M14,526.7637 L14,572.2637 L234.5,572.2637 L234.5,544.2637 L217,526.7637 L14,526.7637 " fill="#FFAAAA" filter="url(#fay23ov0ohgb2)" style="stroke: #A80036; stroke-width: 1.75;"/><path d="M217,526.7637 L217,544.2637 L234.5,544.2637 L217,526.7637 " fill="#FFAAAA" style="stroke: #A80036; stroke-width: 1.75;"/><text fill="#000000" font-family="sans-serif" font-size="22.75" lengthAdjust="spacingAndGlyphs" textLength="183.75" x="24.5" y="559.1301">game:foo=2,bar=1</text><polygon fill="#A80036" points="746.375,592.1289,763.875,599.1289,746.375,606.1289,753.375,599.1289" style="stroke: #A80036; stroke-width: 1.75;"/><line style="stroke: #A80036; stroke-width: 1.75;" x1="518.875" x2="756.875" y1="599.1289" y2="599.1289"/><!--MD5=[75bbc00ab16310df6f4a04644b31c96e]
@startuml

title Inconsistent game state on frontend

User1 -> Backend: getGame()
activate Backend
Backend -> User1
deactivate Backend
note left: game:foo=1,bar=1

User2 -> Backend: changeGame(bar=2)
activate Backend
note left: game:foo=1,bar=2
Backend -> User2
deactivate Backend


User1 -> Backend: subscribeOnGame()
activate Backend

Backend -> User1
deactivate Backend

User2 -> Backend: changeGame(foo=2)
activate Backend
note left: game:foo=2,bar=2
Backend - -> User1: notifyGameChanged()
note left #FFAAAA: game:foo=2,bar=1
Backend -> User2
deactivate Backend



@enduml

PlantUML version 1.2020.09(Sun May 10 13:51:06 MSK 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.53
Operating System: Windows 10
Default Encoding: Cp1251
Language: en
Country: US
--></g></svg>